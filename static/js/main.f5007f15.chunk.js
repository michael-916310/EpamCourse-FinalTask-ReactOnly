(this["webpackJsonpfinal-task-react-only"]=this["webpackJsonpfinal-task-react-only"]||[]).push([[0],{23:function(e,t,a){e.exports=a(46)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(13),s=a.n(r),l=a(19),o=a(9),c="/EpamCourse-FinalTask-ReactOnly";function m(e){var t=e.searchString,a=e.searchArray,n=e.byTitle,i=e.byDirector,r=e.byID;return fetch("https://my-json-server.typicode.com/michael-916310/my-json-server/movies").then((function(e){if(e.ok)return e.json();throw new Error("Fetching data-wrong response-status:".concat(e.status))})).then((function(e){return e})).catch((function(e){return console.log(e)})).then((function(e){return e.filter((function(e){var s;if(n)s=e.title.toUpperCase();else{if(!i)return!!r&&(s=e.id,a.includes(s));s=e.director.toUpperCase()}return s.includes(t.toUpperCase())}))}))}a(28),a(29);var h=a(2),u=a(3),d=a(10),f=a(5),p=a(4),v=(a(30),a(31),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).el=document.createElement("div"),n.modalRoot=document.getElementById("modal-root"),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.modalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.modalRoot.removeChild(this.el)}},{key:"render",value:function(){return s.a.createPortal(this.props.children,this.el)}}]),a}(i.a.Component)),g=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=document.querySelector(".search-comp__search-string");t&&t.value?n.props.onSubmit():n.setState({showModalEmptySearch:!0})},n.handleByTitleClick=function(){n.props.onSearchByChange(!0)},n.handleByDirectorClick=function(){n.props.onSearchByChange(!1)},n.handleCloseModal=function(){n.setState({showModalEmptySearch:!1})},n.handleGoToFavorites=function(){window.location.assign("".concat(c,"/favorites"))},n.state={showModalEmptySearch:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e="search-comp__search-by-title",t="search-comp__search-by-director";return this.props.searchByTitle?e+=" search-comp__search-by_selected":t+=" search-comp__search-by_selected",i.a.createElement("div",{className:"search-comp-outer-container"},i.a.createElement("div",{className:"search-comp-inner-container"},i.a.createElement("div",{className:"search-comp__caption1"},"netflixroulette",i.a.createElement("input",{type:"button",className:"search-comp__button",onClick:this.handleGoToFavorites,value:"Go to FAVORITES"})),i.a.createElement("div",{className:"search-comp__caption2"},"FIND YOUR MOVIE"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",className:"search-comp__search-string",onChange:this.props.onSearchStringChange,value:this.props.searchString}),i.a.createElement("div",{className:"search-comp__buttom-line"},i.a.createElement("div",null,i.a.createElement("span",{className:"search-comp__search-by-caption"},"SEARCH BY"),i.a.createElement("input",{className:e,type:"button",onClick:this.handleByTitleClick,value:" TITLE "}),i.a.createElement("input",{className:t,type:"button",onClick:this.handleByDirectorClick,value:"DIRECTOR"})),i.a.createElement("div",null,i.a.createElement("input",{className:"search-comp__button",type:"submit",value:"  SEARCH  "})))),this.state.showModalEmptySearch&&i.a.createElement(v,null,i.a.createElement("div",{className:"search-comp__modal-nothing-to-search-background"},i.a.createElement("div",{className:"search-comp__modal-nothing-to-search-outer-container"},"There is nothing to search. Please enter non empty string to search.",i.a.createElement("div",{className:"search-comp__modal-nothing-to-search-button-container"},i.a.createElement("input",{className:"search-comp__modal-nothing-to-search-button",type:"button",value:"CLOSE",onClick:this.handleCloseModal})))))))}}]),a}(i.a.Component),y=a(22);a(32),a(33);function E(e){return i.a.createElement(v,null,i.a.createElement("div",{className:"modal-2-buttons__background"},i.a.createElement("div",{className:"modal-2-buttons__outer-container"},i.a.createElement("div",null,e.message),i.a.createElement("div",{className:"modal-2-buttons__button-container"},i.a.createElement("input",{className:"modal-2-buttons__action-button",type:"button",value:e.actionButtonName,onClick:e.onActionClick}),i.a.createElement("input",{className:"modal-2-buttons__action-button",type:"button",value:"CLOSE",onClick:e.onCloseClick})))))}var S=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleOpenModalClick=function(){n.props.flagAddToFavorites?n.setState({showModalAddToFavorites:!0}):n.props.flagRemoveFromFavorites&&n.setState({showModalRemoveFromFavorites:!0})},n.handleAddClick=function(){var e=localStorage.getItem("favoritesArray");if(e){var t=e.split(",");t.includes(""+n.props.id)||localStorage.setItem("favoritesArray",[].concat(Object(y.a)(t),[[n.props.id]]).join(","))}else localStorage.setItem("favoritesArray",[n.props.id].join(","));n.setState({showModalAddToFavorites:!1})},n.handleCloseClick=function(){n.setState({showModalAddToFavorites:!1,showModalRemoveFromFavorites:!1})},n.handleRemoveClick=function(e){var t=localStorage.getItem("favoritesArray");if(t){var a=t.split(",").filter((function(t){return!(Number(t)==Number(e))}));localStorage.setItem("favoritesArray",a.join(","))}n.handleCloseClick(),n.props.refreshFilms()},n.state={showModalAddToFavorites:!1,showModalRemoveFromFavorites:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"film-card-comp-container"},i.a.createElement("img",{className:"film-card-comp__poster",src:this.props.posterUrl,alt:"film poster",onClick:this.props.onPosterClick}),i.a.createElement("div",{className:"film-card-comp__line1"},i.a.createElement("span",{className:"film-card-comp__title"},this.props.title),i.a.createElement("span",{className:"film-card-comp__year"},this.props.year)),i.a.createElement("div",{className:"film-card-comp__line2"},i.a.createElement("div",null,this.props.genres," ",i.a.createElement("br",null),"Runtime: ",this.props.runtime," minute ",i.a.createElement("br",null),"Director: ",this.props.director),i.a.createElement("img",{className:"film-card-comp__star",src:"".concat(c,"/img/favorites_star.ico"),alt:"star",onClick:this.handleOpenModalClick})),this.state.showModalAddToFavorites&&i.a.createElement(E,{message:'Add film "'.concat(this.props.title,'" by "').concat(this.props.director,'" to favorites?'),actionButtonName:"ADD",onActionClick:this.handleAddClick,onCloseClick:this.handleCloseClick}),this.state.showModalRemoveFromFavorites&&i.a.createElement(E,{message:'Remove film "'.concat(this.props.title,'" by "').concat(this.props.director,'" from favorites?'),actionButtonName:"REMOVE",onActionClick:function(){return e.handleRemoveClick(e.props.id)},onCloseClick:this.handleCloseClick}))}}]),a}(i.a.Component),b=(a(34),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"handlePosterClick",value:function(e){window.location.href="".concat(c,"/film/").concat(e)}},{key:"render",value:function(){var e=this,t=this.props.filmList.map((function(t){return i.a.createElement(S,{key:t.id,id:t.id,posterUrl:t.posterUrl,year:t.year,genres:t.genres.toString(),title:t.title,director:t.director,runtime:t.runtime,onPosterClick:function(){return e.handlePosterClick(t.title)},flagAddToFavorites:e.props.flagAddToFavorites,flagRemoveFromFavorites:e.props.flagRemoveFromFavorites,refreshFilms:e.props.refreshFilms})}));return i.a.createElement("div",{className:"film-list-outer-container"},i.a.createElement("div",{className:"film-list-inner-container"},this.props.renderFirstLine,i.a.createElement("div",{className:"film-list-comp__list"},t)))}}]),a}(i.a.Component));a(35);function _(e){return i.a.createElement("div",{className:"footer-comp-outer-container"},i.a.createElement("div",{className:"footer-comp-inner-container"},"netflixroulette"))}a(36);function C(e){return e.isLoading?i.a.createElement(v,null,i.a.createElement("div",{className:"spinner-comp-background"},i.a.createElement("img",{src:"".concat(c,"/img/load.gif"),alt:"spinner"}))):null}a(37);var N=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(h.a)(this,a),(n=t.call(this,e)).URLFilm=e.match.params.filmName;var i=new URL(window.location.href);return i.searchParams.has("searchByTitle")?(n.URLSearchByTitle=Boolean(i.searchParams.get("searchByTitle")),console.log("get",Boolean(i.searchParams.get("searchByTitle")))):(n.URLSearchByTitle=!0,console.log("has",!i.searchParams.has("searchByTitle"))),console.log("URLSearchByTitle:".concat(n.URLSearchByTitle)),n.state={searchString:n.URLFilm,searchByTitle:n.URLSearchByTitle,filmList:[],isLoading:!1},n.handleSearchStringChange=n.handleSearchStringChange.bind(Object(d.a)(n)),n.handleSearchByChange=n.handleSearchByChange.bind(Object(d.a)(n)),n.handleSearch=n.handleSearch.bind(Object(d.a)(n)),n.handleSortByRuntime=n.handleSortByRuntime.bind(Object(d.a)(n)),n.handleSortByDate=n.handleSortByDate.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleSearchStringChange",value:function(e){this.setState({searchString:e.target.value})}},{key:"handleSearchByChange",value:function(e){this.setState({searchByTitle:e})}},{key:"loadFilmListToState",value:function(){var e=this;this.setState({isLoading:!0}),m({searchString:this.state.searchString,byTitle:this.state.searchByTitle,byDirector:!this.state.searchByTitle}).then((function(t){e.setState({filmList:t,isLoading:!1})}))}},{key:"handleSearch",value:function(){if(this.URLFilm!==this.state.searchString||this.URLSearchByTitle!==this.state.searchByTitle){var e=new URL("".concat(c,"/search/").concat(this.state.searchString),window.location.origin);e.searchParams.set("searchByTitle",this.state.searchByTitle?1:""),window.location.assign(e)}}},{key:"sortFilms",value:function(e){var t;t=e?function(e,t){return+e.year>+t.year?-1:1}:function(e,t){return+e.runtime>+t.runtime?-1:1};var a=this.state.filmList.sort(t);this.setState({filmList:a})}},{key:"handleSortByRuntime",value:function(e){e.preventDefault(),this.sortFilms(!1)}},{key:"handleSortByDate",value:function(e){e.preventDefault(),this.sortFilms(!0)}},{key:"renderFistLine",value:function(){var e;return this.state.filmList.length&&(e=i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"film-list-comp__top-line"},i.a.createElement("div",null,this.state.filmList.length," movies found"),i.a.createElement("div",null,"SORT BY",i.a.createElement("a",{className:"film-list-comp__sort-by-release-date",href:"#",onClick:this.handleSortByDate},"release date"),i.a.createElement("a",{className:"film-list-comp__sort-by-runtime",href:"#",onClick:this.handleSortByRuntime},"runtime"))))),e}},{key:"componentDidMount",value:function(){this.state.searchString&&this.loadFilmListToState()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"search-page-header"},i.a.createElement(g,{searchString:this.state.searchString,searchByTitle:this.state.searchByTitle,onSearchStringChange:this.handleSearchStringChange,onSubmit:this.handleSearch,onSearchByChange:this.handleSearchByChange})),i.a.createElement("div",{className:"search-page-result"},this.state.filmList.length?i.a.createElement(b,{renderFirstLine:this.renderFistLine(),filmList:this.state.filmList,flagAddToFavorites:!0}):i.a.createElement("div",{className:"search-page-empty-result"},"No films found")),i.a.createElement("div",{className:"search-page-footer"},i.a.createElement(_,null)),i.a.createElement(C,{isLoading:this.state.isLoading}))}}]),a}(i.a.Component);a(38);function k(e){return i.a.createElement("div",{className:"film-detail-comp-outer-container"},i.a.createElement("div",{className:"film-detail-comp-inner-container"},i.a.createElement("div",{className:"film-detail-comp__first-line"},i.a.createElement("div",{className:"film-detail-comp__first-line-caption"},"netflixroulette"),i.a.createElement("div",null,i.a.createElement("input",{className:"film-detail-comp__first-line-button",type:"button",value:"Go to SEARCH",onClick:function(){window.location.href="".concat(c,"/search/").concat(e.director,"?searchByTitle=")}}),i.a.createElement("input",{className:"film-detail-comp__first-line-button",type:"button",value:"Go to FAVORITES",onClick:function(){window.location.assign("".concat(c,"/favorites"))}}))),i.a.createElement("div",{className:"film-detail-comp__totall-details-container"},i.a.createElement("div",{className:"film-detail-comp__poster"},i.a.createElement("img",{className:"film-detail-comp__poster-img",src:e.posterUrl,alt:"POSTER IMAGE"})),i.a.createElement("div",{className:"film-detail-comp__details"},i.a.createElement("div",{className:"film-detail-comp__title"},e.title),i.a.createElement("div",{className:"film-detail-comp__year"},e.year," ",e.runtime," min"),i.a.createElement("div",{className:"film-detail-comp__plot"},e.plot),i.a.createElement("div",{className:"film-detail-comp__director"},"Director: ",e.director),i.a.createElement("div",{className:"film-detail-comp__actors"},"Cast: ",e.actors)))))}a(39);var F=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={filmTitle:e.match.params.filmName,filmDesc:{posterUrl:"",title:"",year:"",runtime:"",plot:"",director:"",actors:""},filmList:[],isLoading:!1},n}return Object(u.a)(a,[{key:"getFilmDesc",value:function(){var e=this;if(this.state.filmTitle)return this.setState({isLoading:!0}),m({searchString:this.state.filmTitle,byTitle:!0}).then((function(t){Array.isArray(t)&&1===t.length&&e.setState({filmDesc:{posterUrl:t[0].posterUrl,title:t[0].title,year:t[0].year,runtime:t[0].runtime,plot:t[0].plot,director:t[0].director,actors:t[0].actors},isLoading:!1})}))}},{key:"getFilmListByDirector",value:function(){var e=this;if(this.state.filmDesc.director)return this.setState({isLoading:!0}),m({searchString:this.state.filmDesc.director,byDirector:!0}).then((function(t){t.length>0&&e.setState({filmList:t,isLoading:!1})}))}},{key:"componentDidMount",value:function(){var e=this;this.getFilmDesc().then((function(){e.getFilmListByDirector()}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"film-page-header"},i.a.createElement(k,{posterUrl:this.state.filmDesc.posterUrl,title:this.state.filmDesc.title,year:this.state.filmDesc.year,runtime:this.state.filmDesc.runtime,plot:this.state.filmDesc.plot,director:this.state.filmDesc.director,actors:this.state.filmDesc.actors})),i.a.createElement("div",{className:"film-page-content"},i.a.createElement(b,{renderFirstLine:i.a.createElement("div",null,"Films by ",this.state.filmDesc.director," "),filmList:this.state.filmList,flagAddToFavorites:!0})),i.a.createElement("div",{className:"film-page-footer"},i.a.createElement(_,null)),i.a.createElement(C,{isLoading:this.state.isLoading}))}}]),a}(i.a.Component),L=(a(40),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).getFavoritesArray=function(){var e=localStorage.getItem("favoritesArray"),t=[];return e&&(t=e.split(",")),t.map((function(e){return+e}))},n.loadFilmById=function(e){m({searchArray:e,byID:!0}).then((function(e){n.setState({favoritesList:e})}))},n.refreshFilms=function(){n.loadFilmById(n.getFavoritesArray())},n.state={favoritesList:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.loadFilmById(this.getFavoritesArray())}},{key:"handleGoToSerach",value:function(){window.location.assign("".concat(c))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"favorites-page-header"},i.a.createElement("div",{className:"favorites-page-outer-container"},i.a.createElement("div",{className:"favorites-page-inner-container"},i.a.createElement("div",{className:"favorites-page-container"},i.a.createElement("div",{className:"favorites-page-caption"},"YOUR FAVORITES FILMS"),i.a.createElement("div",null,i.a.createElement("input",{type:"button",className:"favorites-page-button",onClick:this.handleGoToSerach,value:"go to SEARCH"})))))),i.a.createElement("div",{className:"favorites-page-film-list"},0===this.state.favoritesList.length?i.a.createElement("div",{className:"favorites-page-empty-result"},"No films added to favorites"):i.a.createElement(b,{filmList:this.state.favoritesList,flagRemoveFromFavorites:!0,refreshFilms:this.refreshFilms})),i.a.createElement("div",{className:"favorites-page-fotter"},i.a.createElement(_,null)))}}]),a}(i.a.Component));var T=function(){return i.a.createElement("div",{className:"application-container"},i.a.createElement(l.a,{basename:c},i.a.createElement(o.c,null,i.a.createElement(o.a,{path:"/search/:filmName",component:N}),i.a.createElement(o.a,{path:"/film/:filmName",component:F}),i.a.createElement(o.a,{path:"/favorites",component:L}),i.a.createElement(o.a,{path:"/",component:N}))))};s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(T,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.f5007f15.chunk.js.map